<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 2959acc0-33d8-4039-a443-a0935ac79d5f (2026-01-19 20:01Z) -->

# Npm engine warnings in Docker build (2026-01-19 20:01Z)

_**User**_

in my docker build I got these errors:

npm WARN deprecated glob@8.1.0: Glob versions prior to v9 are no longer supported
npm WARN deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm WARN deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN notsup Unsupported engine for supertest@7.2.2: wanted: {"node":">=14.18.0"} (current: {"node":"14.8.0","npm":"6.14.7"})
npm WARN notsup Not compatible with your version of node/npm: supertest@7.2.2
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.3: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
npm WARN notsup Unsupported engine for superagent@10.3.0: wanted: {"node":">=14.18.0"} (current: {"node":"14.8.0","npm":"6.14.7"})
npm WARN notsup Not compatible with your version of node/npm: superagent@10.3.0
npm WARN notsup Unsupported engine for @noble/hashes@1.8.0: wanted: {"node":"^14.21.3 || >=16"} (current: {"node":"14.8.0","npm":"6.14.7"})
npm WARN notsup Not compatible with your version of node/npm: @noble/hashes@1.8.0

---

_**Agent (model default, mode Agent)**_


Checking the Dockerfile and package.json to identify the Node.js version and dependency issues.


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: /Users/bietiekay/code/miataru-server/Dockerfile</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: /Users/bietiekay/code/miataru-server/package.json</summary>

</details>
</tool-use>

---


The Dockerfile uses `node:alpine` without a version, pulling an old Node.js (14.8.0), while `package.json` requires Node >= 18.0.0. Updating the Dockerfile to use Node 18+.


---

<tool-use data-tool-type="write" data-tool-name="edit_file_v2">

<details><summary>Tool use: **edit_file_v2** • Edit file: /Users/bietiekay/code/miataru-server/Dockerfile</summary>

</details>

</tool-use>

---


Updated the Dockerfile to use Node.js 18, matching the `engines` requirement in `package.json` (>= 18.0.0).

**What I fixed:**
- Changed `FROM node:alpine` to `FROM node:18-alpine` to use Node 18, resolving the engine compatibility warnings for `supertest`, `superagent`, and `@noble/hashes`.

**Remaining warnings (non-critical):**
- Deprecated packages (`glob`, `inflight`): warnings from transitive dependencies; won't break the build.
- `fsevents`: optional macOS dependency; expected to be skipped on Linux.
- `package-lock.json` notice: informational; commit the lockfile for reproducible builds.

The build should now complete without engine compatibility errors. The deprecated package warnings are from transitive dependencies and don't affect functionality.

---

